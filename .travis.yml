language: common-lisp
sudo: false

env:
  # global:
  #   - PATH=~/.roswell/bin:$PATH
  #   - ROSWELL_BRANCH=release
  #   - ROSWELL_INSTALL_DIR=$HOME/.roswell
  matrix:
    - LISP=abcl
    #- LISP=allegro
    #- LISP=cmucl
    - LISP=ccl
    - LISP=ecl
    - LISP=sbcl
    
# addons:
#   apt:
#     packages:
#       # it is required for some reason
#       # to install allegrocl and cmucl
#       - libc6-i386
      
install:
  - curl https://raw.githubusercontent.com/luismbo/cl-travis/master/install.sh | bash

# before_script:
#   - ros --version
#   - ros config
#   - ros -e '(princ (lisp-implementation-type))
#             (terpri)
#             (princ (lisp-implementation-version))
#             (terpri)
#             (princ *features*)
#             (terpri)'

script:
  # - ros install prove
  # - run-prove chenyi-test.asd
  - cl -e '(ql:quickload :prove)
           (ql:quickload :chenyi-test)
           (asdf:test-system :chenyi)'
